/*
  ✅ このコードは ES Modules（ESM）における import の使い分けと、
  読み込んだ関数を使って「計算 → ログ出力」する一連の流れを示している。

  大きく分けると2種類の依存を import している：
  1) 自作モジュール（./modules/math.js）から
     - default export（times）
     - named export（plus）
     を同時に取り込む
  2) 外部ライブラリ lodash を “デフォルト相当（* as 的な集約）” で取り込む

  ------------------------------------------------------------
  1) import のアルゴリズム：依存解決 → バインディング束縛 → 実行
  ------------------------------------------------------------
  ESM は概念的に

  (1) import 文を解析して依存関係グラフを作る
  (2) 依存モジュールをロードして export を確定する
  (3) import 側の識別子（times, plus, _）にバインディングを束縛する
  (4) トップレベルコード（console.log など）を実行する

  という順で進む。

  ------------------------------------------------------------
  2) 自作モジュールの import：default と named の同時取得
  ------------------------------------------------------------
*/

import times, { plus } from './modules/math.js';
/*
  ✅ 構文の意味：
  - times は ./modules/math.js の default export を受け取る
  - { plus } は named export の plus を受け取る

  つまり math.js 側が

    export const plus = ...
    export default times

  のようになっていることを前提にしている。

  import 側から見ると API は
    - times(...)  : 掛け算（デフォルト引数で2倍）
    - plus(...)   : 足し算（デフォルト引数で+1）
  という2つの関数を使える状態になる。
*/

/*
  ------------------------------------------------------------
  3) lodash の import：ユーティリティ関数群の利用
  ------------------------------------------------------------
*/

import _ from 'lodash';
/*
  ✅ lodash を `_` として受け取っている。
  lodash は多数のユーティリティ関数を持つ “名前空間オブジェクト” 的に使われることが多く、
  _.min / _.max のようにメソッド参照で呼ぶ。

  ここでは配列から最小値・最大値を求めるために使う。
*/

/*
  ------------------------------------------------------------
  4) 呼び出しアルゴリズム：デフォルト引数が効く
  ------------------------------------------------------------
*/

console.log(plus(5));
/*
  ✅ plus(5) は第2引数を省略しているので、
  math.js 側で定義されたデフォルト引数が適用される。

  例：plus(n, m = ONE) => n + m
      ONE = 1 なら
      plus(5) = 5 + 1 = 6

  ※ デフォルト引数は “引数が undefined のときだけ” 発動するルール。
*/

console.log(times(4));
/*
  ✅ times(4) も第2引数を省略しているので、
  デフォルト引数（ZWEI=2）が適用される。

  例：times(n, m = 2) => n * m
      times(4) = 4 * 2 = 8
*/

/*
  ------------------------------------------------------------
  5) lodash による min/max：配列走査のアルゴリズム
  ------------------------------------------------------------
*/

const arr = [7, 37, 48, 10, 5, 23];

console.log(_.min(arr), _.max(arr));
/*
  ✅ _.min(arr) / _.max(arr) は概念的には次を行う：

  - 配列の要素を順に走査する
  - 現在の最小/最大を保持しながら更新する（線形探索：O(N)）
  - 最終的な最小値・最大値を返す

  この配列の場合、
  - 最小値は 5
  - 最大値は 48
  が出力される。

  実際の出力の並びは：
    6
    8
    5 48
  （環境によって表示形式は多少変わるが値はこの通り）
*/