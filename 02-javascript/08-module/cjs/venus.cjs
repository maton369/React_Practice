/*
  ✅ このコードは Node.js の CommonJS 形式で、
  `exports` オブジェクトにプロパティを追加して「複数の関数を名前付きで公開」する例である。

  ------------------------------------------------------------
  1) CommonJS の export の基本：module.exports と exports の関係
  ------------------------------------------------------------
  Node.js の各モジュール（ファイル）には内部的に `module` というオブジェクトがあり、
  その `module.exports` が「このモジュールが外部に公開する値」になる。

  `exports` はそのための “ショートカット（別名参照）” として提供されていて、
  通常は最初こういう関係になっている：

    exports === module.exports   // true

  つまり、`exports.xxx = ...` と書くのは
  `module.exports.xxx = ...` と同じ意味で “公開オブジェクトにプロパティを追加” している。

  ⚠️ 注意：
  `exports = { ... }` のように exports 自体に代入すると、
  module.exports との参照関係が切れてしまい公開されない、という落とし穴がある。
  （プロパティ追加はOK、exportsの再代入はNG というイメージ）

  ------------------------------------------------------------
  2) このコードが公開しているAPI（外部から見えるもの）
  ------------------------------------------------------------
  - exports.transform : 関数（無名関数を代入）
  - exports.finish    : 関数（finish を定義してから代入）

  どちらも require 側からはこう呼べる：

    const venus = require('./venus');
    venus.transform();
    venus.finish();

  ------------------------------------------------------------
  3) 1つ目：exports.transform = function() { ... }
  ------------------------------------------------------------
  これは “その場で関数オブジェクトを作って”
  exports の transform プロパティに格納する。

  アルゴリズム的には：
  - 関数オブジェクト生成（ヒープ上）
  - exports['transform'] に参照を代入
  - require 側は exports オブジェクト越しにその関数へ到達する

  ------------------------------------------------------------
  4) 2つ目：function finish() { ... } と exports.finish = finish
  ------------------------------------------------------------
  finish は関数宣言なので、
  - 関数オブジェクトはスコープに登録（ホイスティングの対象）
  - モジュール内では finish() で直接呼べる

  その後 `exports.finish = finish;` で
  - exports['finish'] に同じ関数参照を格納する

  つまりこの関数は
  - モジュール内部でも使える（finish()）
  - モジュール外部にも公開される（require().finish()）
  という二重のアクセス経路を持つ。

  ------------------------------------------------------------
  5) “公開されないもの” もある（モジュールスコープ）
  ------------------------------------------------------------
  このファイル内で定義した識別子は基本的にモジュールスコープで閉じている。
  外部に見えるのは `module.exports`（= exports）に載せたものだけ。

  今回は finish を exports.finish に載せたので外に出るが、
  もし載せなければ外部からは参照できない “プライベート関数” になる。

  ------------------------------------------------------------
  6) まとめ：このモジュールの実体
  ------------------------------------------------------------
  このファイルの公開値は「オブジェクト」で、その中身は概ね次の形になる：

    {
      transform: [Function],
      finish:    [Function]
    }

  つまり「名前付き関数を複数エクスポートする」CommonJSスタイルである。
*/

// ✅ exports.transform として “transform 関数” を公開する
exports.transform = function () {
  console.log('Venus power, make up!');
};

// ✅ まずモジュール内関数として finish を定義（関数宣言なので hoisting される）
function finish() {
  console.log('Crescent beam!');
}

// ✅ exports.finish に finish 関数を割り当てて、外部にも公開する
exports.finish = finish;