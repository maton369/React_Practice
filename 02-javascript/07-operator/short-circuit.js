/*
  ✅ このコードは JavaScript の論理演算子 `||` と `&&` が
  「真偽値を返すのではなく、オペランドそのものを返す」こと、
  そして「短絡評価（short-circuit evaluation）」で評価が途中で止まることを示す例である。

  ------------------------------------------------------------
  1) 前提：truthy / falsy と `||` / `&&` の返り値規則
  ------------------------------------------------------------
  JS では値は条件文で「truthy（真っぽい）」か「falsy（偽っぽい）」として扱われる。

  falsy の代表例：
    false, 0, -0, 0n, '', null, undefined, NaN

  それ以外は基本 truthy（例：' '（空白付き文字列）, [], {} は truthy）。

  そして演算子の返り値は次の規則：

  - A || B
      A が truthy なら A を返す（そこで終了）
      A が falsy  なら B を返す（B を評価して結果）

    → 「最初に truthy になった値」を返しやすい（無ければ最後の値）

  - A && B
      A が falsy  なら A を返す（そこで終了）
      A が truthy なら B を返す（B を評価して結果）

    → 「最初に falsy になった値」を返しやすい（無ければ最後の値）

  この “そこで終了” が短絡評価である。

  ------------------------------------------------------------
  2) hello の評価：undefined || null || 0 || NaN || '' || 'Hello!'
  ------------------------------------------------------------
*/

const hello = undefined || null || 0 || NaN || '' || 'Hello!';
/*
  左から順に評価していく（短絡で止まる）：

  - undefined は falsy → 次へ
  - null      は falsy → 次へ
  - 0         は falsy → 次へ
  - NaN       は falsy → 次へ
  - ''        は falsy → 次へ
  - 'Hello!'  は truthy → ここで確定して 'Hello!' が返る

  よって hello は 'Hello!' になる。
*/

/*
  ------------------------------------------------------------
  3) chao の評価：' ' && 100 && [] && {} && 'Chao!'
  ------------------------------------------------------------
*/

const chao = ' ' && 100 && [] && {} && 'Chao!';
/*
  && は「最初に falsy になった値」で止まる。
  逆に全部 truthy なら最後の値が返る。

  左から順に評価：

  - ' '  は truthy（空文字 '' ではなく、空白1文字なので truthy）→ 次へ
  - 100  は truthy → 次へ
  - []   は truthy（空配列でも truthy）→ 次へ
  - {}   は truthy（空オブジェクトでも truthy）→ 次へ
  - 'Chao!' は truthy → 全部 truthy だったので最後の値 'Chao!' が返る

  よって chao は 'Chao!' になる。
*/

/*
  ------------------------------------------------------------
  4) `&&` / `||` を使った条件付き実行（ガード）
  ------------------------------------------------------------
  次の行は “左辺が評価を進めるか止めるか” を使って
  console.log を条件付きで実行している。

  - true  && expr は expr を実行する（true は truthy なので右へ進む）
  - false && expr は expr を実行しない（false で短絡して止まる）

  - true  || expr は expr を実行しない（true で短絡して止まる）
  - false || expr は expr を実行する（false は falsy なので右へ進む）
*/

true && console.log('1.', hello);
/*
  true は truthy なので右辺を評価する → console.log が実行される
  出力：1. Hello!
*/

false && console.log('2.', hello);
/*
  false は falsy なので短絡 → 右辺は評価されない（console.log 実行されない）
  出力なし
*/

true || console.log('3.', chao);
/*
  true は truthy なので短絡 → 右辺は評価されない（console.log 実行されない）
  出力なし
*/

false || console.log('4.', chao);
/*
  false は falsy なので右辺を評価する → console.log が実行される
  出力：4. Chao!
*/

/*
  ------------------------------------------------------------
  5) 最終的な出力まとめ
  ------------------------------------------------------------
  実際に出るのはこの2行だけ：

    1. Hello!
    4. Chao!

  ※ hello は 'Hello!'、chao は 'Chao!' に確定しているため。
*/