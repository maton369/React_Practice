/*
  ✅ このコードは「オブジェクトの分割代入（destructuring）」で
  - ネストしたプロパティ（response.data）を
  - 別名（users）で受け取りつつ
  - デフォルト値（= []）も付ける
  という実務で頻出のパターンを示している。

  ------------------------------------------------------------
  1) 何が起きる？（結論）
  ------------------------------------------------------------
  `const { data: users = [] } = response;` により、

  - response の data プロパティを取り出し
  - それを users という変数名に束縛する
  - もし data が存在しない、または data が undefined なら [] を使う

  今回の response には data がちゃんと存在し、配列が入っているので
  users はその配列（3人分のオブジェクト）になる。

  したがって console.log(users) は data の中身（配列）を表示する。

  ------------------------------------------------------------
  2) アルゴリズム観点：オブジェクト分割代入の束縛手順
  ------------------------------------------------------------
  オブジェクト分割代入は「キー名で値を取り出して束縛する」ルールで動く。

  `const { data: users = [] } = response;` は、概念的に次の処理をしている：

  (1) response.data を読み出す
      -> 値は配列（今回は 3要素の配列）

  (2) data というキーの値を users という変数名で受け取る（リネーム）
      -> users = response.data

  (3) デフォルト値の適用（= []）
      - デフォルトは「取り出した値が undefined のときだけ」適用される
      - 今回は response.data が配列で undefined ではないため、デフォルトは使われない

  重要ポイント：
  - null の場合は undefined ではないのでデフォルトは適用されない
    （APIが null を返す場合は別途ケアが必要）

  ------------------------------------------------------------
  3) `data: users` の意味（キー名と変数名の分離）
  ------------------------------------------------------------
  `{ data: users }` は
  - 左の data は “オブジェクト側のキー”
  - 右の users は “作られる変数名”
  という意味。

  つまり `data` という名前の変数が作られるわけではなく、
  users という変数だけが作られる。

  ------------------------------------------------------------
  4) 実務上の利点（APIレスポンスに強い）
  ------------------------------------------------------------
  APIレスポンスでは data が無かったり、未定義だったりすることがある。
  その場合でも

    const { data: users = [] } = response;

  としておけば、users は必ず配列になり、
  以降 `users.map(...)` のような処理が安全に書きやすくなる。

  ただし response 自体が undefined の可能性があるなら、
  さらに上の層で `response ?? {}` のようなガードが必要になる。
*/

const response = {
  data: [
    {
      id: 1,
      name: 'Patty Rabbit',
      email: 'patty@maple.town',
    },
    {
      id: 2,
      name: 'Rolley Cocker',
      email: 'rolley@palm.town',
    },
    {
      id: 3,
      name: 'Bobby Kumanov',
      email: 'bobby@maple.town',
    },
  ],
};

// ✅ response.data を取り出して users という変数名で受け取る（リネーム）
// ✅ data が undefined のときだけ users は [] になる（デフォルト値）
const { data: users = [] } = response;

console.log(users); // 3人分のユーザー配列が表示される