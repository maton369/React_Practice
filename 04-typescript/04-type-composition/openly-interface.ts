// ✅ このコードは TypeScript の「インターフェースの宣言マージ（declaration merging）」の例である。
// 同じ名前の interface User を複数回 선언（declare）すると、TypeScript はそれらを “合体” して1つの User として扱う。
//
// 重要ポイント：
// - interface は同名で複数回書ける（type alias では基本できない）
// - その結果、User 型は
//     { name: string; age: number; species: 'rabbit' | 'bear' | 'fox' | 'dog' }
//   という “全プロパティを持つ1つの型” になる
// - species は文字列リテラル union なので、許された4種類以外は代入できない
//
// アルゴリズム的には：
// - “同名の型定義の断片” を収集して、最終的に1つの型定義に統合する処理が行われる。
// - これはライブラリの型拡張（既存型へプロパティを追加する）などでよく使われる。

// ------------------------------------------------------------
// 1) 1回目の User 宣言：name を追加
// ------------------------------------------------------------
interface User {
    name: string;
}

// ------------------------------------------------------------
// 2) 2回目の User 宣言：age を追加
// ------------------------------------------------------------
interface User {
    age: number;
}

// ------------------------------------------------------------
// 3) 3回目の User 宣言：species を追加（有限集合に制限）
// ------------------------------------------------------------
interface User {
    // ✅ species は 'rabbit' | 'bear' | 'fox' | 'dog' のどれかに限定される
    species: 'rabbit' | 'bear' | 'fox' | 'dog';
}

/*
  ✅ 宣言マージ後の User の最終形（概念）：

  interface User {
    name: string;
    age: number;
    species: 'rabbit' | 'bear' | 'fox' | 'dog';
  }

  つまり、User を名乗るなら name/age/species をすべて持っている必要がある。
*/

// ------------------------------------------------------------
// 4) rolley：統合された User 型に合うオブジェクト
// ------------------------------------------------------------
const rolley: User = {
    // ✅ name: string
    name: 'Rolley Cocker',

    // ✅ age: number
    age: 8,

    // ✅ species: union の要素なので OK
    // 例えば 'cat' を入れるとコンパイルエラーになる。
    species: 'dog',
};

// ------------------------------------------------------------
// 5) 出力：実行時にはただのオブジェクトとして表示される
// ------------------------------------------------------------
console.log(rolley);

/*
  補足：
  - interface の宣言マージは “同名の宣言を足し算する” ような動きなので、
    大規模プロジェクトや型定義ファイル（*.d.ts）で既存型を拡張するのに便利。
  - ただし意図せず同名 interface を作ると、勝手に合体して型が壊れることもあるので、
    命名やスコープ設計には注意が必要。
*/