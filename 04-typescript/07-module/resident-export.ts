// ✅ このコードは TypeScript で
// - 文字列リテラル union による有限集合（Species）
// - class による “実体（値）” を伴うデータ型（Resident）
// - null 許容（species: Species | null）による “未設定状態” の表現
// - type export（型として公開）
// を行う例である。
//
// アルゴリズム的な観点では：
// - Species は「取り得る値の集合」を型レベルで固定する（入力空間の制約）
// - Resident は「初期状態（デフォルト値）を持ったレコード構造」を class として提供する
// - species を null 許容にすることで、状態遷移（未設定→設定済み）を表現できる
//   ただし利用側は null チェックを必須にする必要がある

// ------------------------------------------------------------
// 1) Species：種別の有限集合（文字列リテラル union）
// ------------------------------------------------------------
type Species = "rabbit" | "bear" | "fox" | "dog";
/*
  ✅ Species を集合として見ると：
    S = { "rabbit", "bear", "fox", "dog" }

  ✅ 目的：
  - species に入れられる値を “この集合のどれか” に限定する
  - スペルミスや想定外の値（例："cat"）をコンパイル時に排除する
*/

// ------------------------------------------------------------
// 2) Resident：住人を表す class（実体を生成できる）
// ------------------------------------------------------------
class Resident {
    // ✅ name は空文字で初期化される
    //   new Resident() した瞬間に name は必ず string になる
    name = "";

    // ✅ age は 0 で初期化される
    //   未入力のデフォルト値として 0 を採用している
    age = 0;

    // ✅ species は “Species か null” を許容する
    //   null は「まだ種別が設定されていない」状態を表す
    species: Species | null = null;
}
/*
  ✅ class を使う意味（interface/type と違う点）：
  - class は実行時にコンストラクタとプロトタイプを持つ
  - new Resident() でインスタンス（値）を生成できる
  - デフォルト値（name="", age=0, species=null）を持てる

  ✅ species を null 許容にしている意味（状態機械の観点）：
  - 初期状態：species = null（未設定）
  - 遷移：species に "rabbit" などを代入すると設定済み状態へ

  ⚠️ ただし利用側では：
  - species が null の可能性を常に考慮し、
    if (resident.species !== null) のようなチェックや
    ?? でのフォールバックが必要になる
*/

// ------------------------------------------------------------
// 3) export：型として外部に公開する
// ------------------------------------------------------------
export type { Species, Resident };
/*
  ✅ export type の意味：
  - ここで公開するのは “型としての名前”。
  - import 側は型注釈やジェネリクスで使える。

  ⚠️ Resident は class なので本来 “値” としても import したい場合がある。
  しかし export type だけだと、実行時に new Resident() するための値としては提供されない。
  もしインスタンス生成まで他ファイルで行いたいなら、通常は
    export { Resident };
  のように値としても export する設計にする。

  ※ ここでは「型だけ公開して、実装（クラス値）は公開しない」意図の可能性がある。
*/