// ✅ このコードは TypeScript の interface による “オブジェクト形状（型）” の定義と、
// - readonly（読み取り専用）
// - optional（任意プロパティ）
// - 型チェックによる代入制約
// を確認する例である。
//
// 重要ポイント：
// - interface は「このオブジェクトはこういうプロパティを持つべき」という契約（静的型）
// - readonly は “再代入禁止” をコンパイル時に保証する（実行時に自動で凍結されるわけではない）
// - optional（?）は「存在してもしなくても良い」を表す
// - `const tq: Color = ...` は tq の shape を Color に合わせる（余計/不足/型違いがあればコンパイルエラー）

// ------------------------------------------------------------
// 1) Color インターフェース：オブジェクトの設計図（型の契約）
// ------------------------------------------------------------
interface Color {
    // ✅ rgb は読み取り専用（readonly）
    // - tq.rgb = '...' のような “再代入” を禁止する
    // - ただしこれは TypeScript の型レベルの保証であり、
    //   実行時に Object.freeze される等の挙動が自動で起きるわけではない
    readonly rgb: string;

    // ✅ opacity は数値で、再代入可能（readonly ではない）
    // - 例：tq.opacity = 0.5 は許可される
    opacity: number;

    // ✅ alias は任意（optional）
    // - あってもよいし、なくてもよい
    // - 型としては string | undefined として扱われることが多い
    alias?: string;
}

// ------------------------------------------------------------
// 2) tq の生成：Color 型として成立するオブジェクトを作る
// ------------------------------------------------------------
// ✅ tq は Color 型であることを宣言しているため、最低限 rgb と opacity が必要になる。
// - rgb は string
// - opacity は number
// alias は optional なのでなくてもOK
const tq: Color = { rgb: '00afcc', opacity: 1 };

// ------------------------------------------------------------
// 3) optional プロパティへの代入：alias は後から追加してもよい
// ------------------------------------------------------------
// ✅ alias は optional だが、「存在させてはいけない」ではなく「無くてもよい」なので、
// 後から代入してプロパティを追加しても型的に問題ない。
tq.alias = 'turquoise';

// ------------------------------------------------------------
// 4) readonly への再代入は禁止：rgb を変えようとするとコンパイルエラー
// ------------------------------------------------------------
// tq.rgb = '03c1ff';
/*
  ✅ これを有効化すると TypeScript でエラーになる（概念）
  - Cannot assign to 'rgb' because it is a read-only property.

  ✅ アルゴリズム/設計の意味：
  - rgb は “この Color を識別する不変属性” として扱いたい
  - 一方 opacity や alias は “可変な属性” として更新してよい
  → 不変と可変を型レベルで分離して、誤更新を防ぐ
*/

// ------------------------------------------------------------
// 補足：readonly の限界（実行時の不変性ではない）
// ------------------------------------------------------------
// readonly は “型チェック時のルール” なので、JS 実行時に書き換え不可能になるわけではない。
// 実行時の不変性も保証したい場合は、Object.freeze などのランタイム対策が別途必要になる。