// ✅ このコードは TypeScript/JavaScript の class を使って「長方形（Rectangle）」というデータと振る舞いをまとめ、
// コンストラクタで状態（辺の長さ）を初期化し、メソッドで面積を計算する例である。
//
// 観察ポイント：
// - class は「インスタンスの設計図」で、new で個体（オブジェクト）を生成する
// - readonly は “再代入禁止” をコンパイル時に保証する（実行時に自動で凍結されるわけではない）
// - constructor は new 時に呼ばれ、インスタンスの初期状態を作る
// - getArea は「面積 = sideA * sideB」を返す純粋な計算（副作用なし）
// - getArea をアロー関数プロパティとして書くと、this がインスタンスに固定（lexical this）されやすい

// ------------------------------------------------------------
// 1) Rectangle クラス：状態（sideA, sideB）と振る舞い（getArea）を定義
// ------------------------------------------------------------
class Rectangle {
    // ✅ name はクラスの識別用ラベルとして固定したい値
    // readonly により、インスタンス生成後に rect.name = '...' の再代入が型エラーになる。
    readonly name = 'rectangle';

    // ✅ インスタンスが保持する状態（フィールド）
    // sideA/sideB は可変（readonly ではない）なので、後から書き換えも可能な設計。
    sideA: number;
    sideB: number;

    // ✅ constructor：インスタンス生成（new）時に必ず呼ばれる初期化関数
    constructor(sideA: number, sideB: number) {
        /*
          ✅ ここで “引数 → フィールド” への代入を行い、
          インスタンスが持つ状態を確定する。
    
          this は “生成中のインスタンス自身” を指す。
          - this.sideA はインスタンスの sideA フィールド
          - sideA は constructor 引数
        */
        this.sideA = sideA;
        this.sideB = sideB;
    }

    // ✅ getArea：面積を計算して返す
    // getArea = () => ... は「メソッド」ではなく「インスタンスプロパティに関数を代入」している形。
    //
    // この書き方の特徴：
    // - アロー関数は自分自身の this を持たず、外側（この場合はインスタンス初期化時点）の this を捕まえる
    //   → コールバックとして渡したときに this がズレる問題を避けやすい
    // - ただし各インスタンスごとに関数オブジェクトが作られる（メモリ的には prototype メソッドより重い）
    //
    // アルゴリズムは単純で、面積 = sideA * sideB
    getArea = () => this.sideA * this.sideB;
}

// ------------------------------------------------------------
// 2) インスタンス生成：new により Rectangle の個体を作る
// ------------------------------------------------------------
const rect = new Rectangle(10, 20);
/*
  ✅ new Rectangle(10, 20) の流れ（概念）：
  1) 空のオブジェクト（インスタンス）を作る
  2) そのプロトタイプを Rectangle.prototype に設定する（class の継承機構）
  3) constructor(sideA, sideB) を this=インスタンスとして実行する
  4) 初期化されたインスタンスが rect に返る
*/

// ------------------------------------------------------------
// 3) 面積の計算：メソッド（関数）呼び出し
// ------------------------------------------------------------
console.log(rect.getArea());
/*
  rect.sideA = 10, rect.sideB = 20 なので、
  rect.getArea() は 10 * 20 = 200 を返し、200 が表示される。
*/