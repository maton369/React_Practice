// ✅ このコードは TypeScript の組み込みユーティリティ型
// - Parameters<F>：関数型 F の引数リストを “タプル型” として取り出す
// - ReturnType<F>：関数型 F の戻り値型を取り出す
// を使って、関数から型情報を抽出する例である。
//
// アルゴリズム的には：
// - 値（関数）→ typeof で型へ持ち上げ
// - 関数シグネチャから「入力（引数）」と「出力（戻り値）」を射影（projection）
// して、再利用できる型として取り出す、という流れになっている。

// ------------------------------------------------------------
// 1) f1：引数あり・戻り値は明示的には返さない関数
// ------------------------------------------------------------
const f1 = (a: number, b: string) => { console.log(a, b); };
/*
  ✅ シグネチャ（概念）：
    (a: number, b: string) => void

  - a は number
  - b は string
  - 関数本体では console.log するだけで return をしない
    → 戻り値型は void（何も返さない）
*/

// ------------------------------------------------------------
// 2) f2：引数なし・オブジェクトを返す関数（括弧の意味が重要）
// ------------------------------------------------------------
const f2 = () => ({ x: 'hello', y: true });
/*
  ✅ `() => ({ ... })` の形：
  - アロー関数で “オブジェクトリテラルを返す” ときは
    ブロック `{}` と区別するために `({ ... })` と丸括弧で包む。

  ✅ シグネチャ（概念）：
    () => { x: string; y: boolean }

  - x は 'hello' という文字列リテラルだが、通常は string に広がる（文脈次第）
  - y は true だが、通常は boolean に広がる（文脈次第）
*/

// ------------------------------------------------------------
// 3) Parameters：関数の引数型をタプルとして抽出
// ------------------------------------------------------------
type P1 = Parameters<typeof f1>;
/*
  ✅ typeof f1 で f1 の関数型を取得し、Parameters で引数リストを抽出する。

  f1 は (number, string) を取るので
    P1 = [number, string]
  となる。

  アルゴリズム：
  - 関数型 F の形 ( ...args ) => any をパターンマッチし、
  - args 部分をタプルとして取り出す（引数順も保存される）
*/

type P2 = Parameters<typeof f2>;
/*
  f2 は引数なしなので
    P2 = []
  となる（空タプル）。

  これにより「引数が無い」ことも型として表現できる。
*/

// ------------------------------------------------------------
// 4) ReturnType：関数の戻り値型を抽出
// ------------------------------------------------------------
type R1 = ReturnType<typeof f1>;
/*
  f1 は return しないので
    R1 = void
  になる。

  void は「値を使うことを期待しない」戻り値型で、
  実際には undefined が返ることが多いが、型としては void を使う。
*/

type R2 = ReturnType<typeof f2>;
/*
  f2 は { x: 'hello', y: true } を返すので
    R2 = { x: string; y: boolean }
  のようなオブジェクト型になる（推論の広がり方は状況に依存）。

  アルゴリズム：
  - 関数型 F の形 (...args) => R をパターンマッチし、
  - R（戻り値）部分を抽出する
*/

// ✅ まとめ：
// - Parameters は「入力（引数）をタプルとして抽出」
// - ReturnType は「出力（戻り値）を抽出」
// - 関数の実装を単一の真実（source of truth）として、型の再利用を可能にする。
//   例：別関数の引数型を f1 と揃えたい、戻り値型を別の場所で使いたい、など。