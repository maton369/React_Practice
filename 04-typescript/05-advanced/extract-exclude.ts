// ✅ このコードは TypeScript の組み込みユーティリティ型
// - Extract<T, U>：T と U の “共通部分（intersection）” を取り出す
// - Exclude<T, U>：T から U を “取り除く（difference）”
// を、文字列リテラル union 型に対して使う例である。
//
// アルゴリズム的にはどちらも「型（union）を集合として見て集合演算を行う」。
// - Extract は集合の共通部分（フィルタして残す）
// - Exclude は集合の差集合（フィルタして落とす）
//
// ※ どちらも conditional type を内部的に使っており、union に対して分配評価される。

// ------------------------------------------------------------
// 1) Permission：権限文字の有限集合（union 型）
// ------------------------------------------------------------
type Permission = 'r' | 'w' | 'x';
/*
  ✅ Permission は集合で言えば { 'r', 'w', 'x' } を表す。
  以後、この集合に対して “残す/除く” の操作を型レベルで行う。
*/

// ------------------------------------------------------------
// 2) RW1：Extract で 'r'|'w' だけを取り出す
// ------------------------------------------------------------
type RW1 = Extract<Permission, 'r' | 'w'>;
/*
  ✅ Extract<T, U> の意味：
  - T の中から U に代入可能なもの（= U に含まれるもの）だけを残す
  - 集合演算的には T ∩ U（共通部分）

  ここでは：
    Permission = 'r' | 'w' | 'x'
    U         = 'r' | 'w'
  なので共通部分は 'r' | 'w' になる。

  アルゴリズム（概念）：
  - union の各要素を 1つずつ見て、
    U に含まれるなら残し、含まれないなら捨てる
*/

// ------------------------------------------------------------
// 3) RW2：Exclude で 'x' を除外する
// ------------------------------------------------------------
type RW2 = Exclude<Permission, 'x'>;
/*
  ✅ Exclude<T, U> の意味：
  - T の中から U に代入可能なもの（= U に含まれるもの）を取り除く
  - 集合演算的には T \ U（差集合）

  ここでは：
    Permission = 'r' | 'w' | 'x'
    U         = 'x'
  なので結果は 'r' | 'w' になる。

  アルゴリズム（概念）：
  - union の各要素を 1つずつ見て、
    U に含まれるなら捨て、含まれないなら残す
*/

// ✅ まとめ：
// - RW1 も RW2 も最終的に 'r' | 'w' になる
//   （片方は “欲しいものを抽出”、もう片方は “不要なものを除外”）
//
// 実務では、仕様変更の入り方に応じて
// - Extract（許可リスト方式）
// - Exclude（禁止リスト方式）
// を使い分けると読みやすい。