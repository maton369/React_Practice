// ✅ このコードは TypeScript の
// - テンプレートリテラル型（Template Literal Types）
// - テンプレートリテラルを使った index signature（動的キーの型制約）
// を使って、
// 1) "YYYY-MM-DD" のような日付文字列フォーマットを型として表現し、
// 2) "month_01" のような規則的キーを持つ辞書を型で縛る
// 例である。
//
// 重要ポイント：
// - `type DateFormat = \`\${number}-\${number}-\${number}\`` は
//   “数字-数字-数字” というパターンに合う文字列だけを許可する
// - ただし number は桁数や範囲を厳密には制限しない（2022-9-1 も理屈上は通る）
// - `interface MonthMap { [key: \`month_\${number}\`]: string }` は
//   “month_ + 数字” というキーだけを許し、値は string とする辞書型を作る
// - そのため monthMap.month_03 のような追加は OK だが、monthMap.four は型エラーになる

// ------------------------------------------------------------
// 1) DateFormat：日付フォーマットをテンプレートリテラル型で表現
// ------------------------------------------------------------
type DateFormat = `${number}-${number}-${number}`;
/*
  ✅ DateFormat が許す文字列のパターン：
    "<数値>-<数値>-<数値>"

  例：
    "2022-09-01" は OK
    "Sep. 1, 2022" は NG（数字-数字-数字ではない）

  ⚠️ 限界：
  - number は “任意の数値” なので、
    "2022-9-1" や "1-2-3"、"99999-999-999" のような文字列もパターン上は許され得る
  - 月が 01〜12、日が 01〜31 などの範囲制約まではここでは表現していない
*/

// ------------------------------------------------------------
// 2) date1：DateFormat に従う文字列
// ------------------------------------------------------------
const date1: DateFormat = "2022-09-01";
console.log(date1);
/*
  ✅ OK：文字列が `${number}-${number}-${number}` の形になっている
*/

// const date2: DateFormat = 'Sep. 1, 2022';
/*
  ❌ コメントアウトされているが、この代入は型エラーになる：
  - "Sep. 1, 2022" は “数字-数字-数字” の形式ではないため
*/

// ------------------------------------------------------------
// 3) MonthMap：キーが規則的な辞書型（テンプレートリテラル index signature）
// ------------------------------------------------------------
interface MonthMap {
    // ✅ キーは `month_${number}` の形だけ許す
    // 例：month_01, month_2, month_12, month_2026 ...（number のため幅広く許可される）
    // 値は string（英語の月名など）
    [key: `month_${number}`]: string;
}
/*
  ✅ ここでのアルゴリズム（型の役割）：
  - “キー命名規則（month_数字）” を型として固定し、
  - その規則外のキーが追加されるのをコンパイル時に遮断する
*/

// ------------------------------------------------------------
// 4) monthMap：MonthMap に従って初期化
// ------------------------------------------------------------
const monthMap: MonthMap = {
    // ✅ キーが month_ + 数字 なので OK
    month_01: 'January',

    // ✅ スペルは間違っていても型は string なので通る（型は意味内容までは検査しない）
    month_02: 'Februaly',
};

// ------------------------------------------------------------
// 5) 追加：規則に従うキーは後から増やせる
// ------------------------------------------------------------
monthMap.month_03 = 'March';
/*
  ✅ OK：month_03 は `month_${number}` パターンに一致するため
*/

// monthMap.four = 'April';
/*
  ❌ コメントアウトされているが、これは型エラーになる：
  - "four" は `month_${number}` というキー規則に一致しないため
*/

// ------------------------------------------------------------
// 6) 出力：実行時には普通のオブジェクト
// ------------------------------------------------------------
console.log(monthMap);
/*
  ✅ 実行時には month_01 / month_02 / month_03 を持つ通常の JS オブジェクトとして表示される。
  TypeScript の型制約はコンパイル時の安全装置であり、実行時にキー規則が強制されるわけではない。
*/