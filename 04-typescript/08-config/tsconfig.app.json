// ✅ これは TypeScript の設定ファイル tsconfig.json（の一部）で、
// Vite + React（JSX）環境を “バンドラ前提” でビルド/型チェックするための設定がまとまっている。
//
// アルゴリズム的には：
// - TypeScript コンパイラ（tsc）が「どのファイルを対象に」「どんな前提で解析し」
//   「どのレベルで型安全・静的検査を適用するか」を決める “ルール集合（コンパイル戦略）” である。
// - 設定は大きく
//   1) 出力・ターゲット戦略（target/module/noEmit）
//   2) 依存解決戦略（moduleResolution/bundler 等）
//   3) 型安全・Lint相当の制約（strict/noUnused* 等）
//   に分かれる。

{
  "compilerOptions": {
    // ------------------------------------------------------------
    // ビルド情報（incremental build のメタデータ置き場）
    // ------------------------------------------------------------
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",
    /*
      ✅ tsc -b（Project References / ビルドモード）等で使われる “ビルドキャッシュ” の保存先。
      - 次回以降のビルドで差分コンパイルを効かせるためのメタデータが入る。
      - node_modules 配下に置くことで、生成物をプロジェクト外に散らさず管理できる。
    */

    // ------------------------------------------------------------
    // JavaScript の出力ターゲット（どの ES 機能まで使える想定か）
    // ------------------------------------------------------------
    "target": "ES2020",
    /*
      ✅ TypeScript が出力する JS の言語レベル目標。
      - 例：class, async/await などがどの程度変換（downlevel）されるかに影響する。
      - ES2020 は比較的新しい仕様で、モダンブラウザや最新Nodeを前提にしやすい。
    */

    // ------------------------------------------------------------
    // class フィールドの出力方式（仕様に寄せるか互換寄りか）
    // ------------------------------------------------------------
    "useDefineForClassFields": true,
    /*
      ✅ class フィールド初期化の実装を、より標準仕様（define semantics）寄りにする設定。
      - Babel/ES仕様に近い出力になる。
      - Vite/モダン環境と合わせると整合が取りやすい。

      ⚠️ レガシー挙動に依存したコード（setter/getter との絡みなど）がある場合、
         挙動差が出る可能性があるため注意が必要。
    */

    // ------------------------------------------------------------
    // 利用可能な標準ライブラリ（型定義）を指定
    // ------------------------------------------------------------
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    /*
      ✅ tsc が参照する “組み込みAPIの型定義セット”。
      - ES2020：Promise/Map/Set 等の標準機能の型
      - DOM：ブラウザ API（document, window, fetch など）の型
      - DOM.Iterable：NodeList 等が iterable として扱えるような型

      アルゴリズム的には、ここで指定した lib が “型検査の前提となる語彙” になる。
    */

    // ------------------------------------------------------------
    // 出力モジュール形式（import/export の扱い）
    // ------------------------------------------------------------
    "module": "ESNext",
    /*
      ✅ 出力コードのモジュール形式を ES Modules 前提にする。
      - バンドラ（Vite）が最終的な変換・最適化を担当する前提と相性が良い。
    */

    // ------------------------------------------------------------
    // 型定義ファイル（.d.ts）のチェックを省略
    // ------------------------------------------------------------
    "skipLibCheck": true,
    /*
      ✅ 依存ライブラリの型定義まで厳密にチェックすると時間が増えるので、
      そこを省略して高速化するオプション。
      - アプリ側の型安全性を主に担保し、依存の型は “信頼” する戦略。
      - 大規模プロジェクトやフロントエンドでよく使われる。
    */

    /* Bundler mode */

    // ------------------------------------------------------------
    // モジュール解決戦略：バンドラ前提（Vite など）で解決する
    // ------------------------------------------------------------
    "moduleResolution": "bundler",
    /*
      ✅ import の解決ルールを “バンドラ寄り” にする。
      - Node の解決規則と微妙に異なるケース（exports フィールド等）を、
        実際のバンドラ挙動に寄せて解決するイメージ。

      アルゴリズム的には、import 文字列 → 参照先ファイル/型定義 を決める解決器のモード指定。
    */

    // ------------------------------------------------------------
    // import で .ts / .tsx など拡張子を明示しても許可
    // ------------------------------------------------------------
    "allowImportingTsExtensions": true,
    /*
      ✅ `import x from './foo.ts'` のような TS 拡張子付き import を許可する。
      - バンドラ環境では拡張子付きが許される/推奨される流儀もあるため、それに合わせる。
      - ただし運用ルール（拡張子を付ける/付けない）をチームで統一すると混乱が減る。
    */

    // ------------------------------------------------------------
    // 1ファイル単位で独立して変換できる前提を要求
    // ------------------------------------------------------------
    "isolatedModules": true,
    /*
      ✅ 各ファイルが単独でトランスパイル可能であることを要求する。
      - Babel / SWC のような “ファイル単位変換” ツールと整合が取れる。
      - 逆に、TypeScript の型情報が無いと変換できない書き方（const enum 等）が制限される。

      アルゴリズム的には「グローバルな型解析に依存しない書き方を強制」する。
    */

    // ------------------------------------------------------------
    // モジュールとして扱う判定を強制
    // ------------------------------------------------------------
    "moduleDetection": "force",
    /*
      ✅ ファイルを “モジュール” とみなす判定を強制する。
      - import/export の有無だけに依存せず、モジュール扱いに寄せることで
        スコープや解釈の揺れを減らす。
    */

    // ------------------------------------------------------------
    // JS 出力を行わない（型チェック専用にする）
    // ------------------------------------------------------------
    "noEmit": true,
    /*
      ✅ tsc による .js 生成を無効化する。
      - 実際のビルドは Vite が担当し、tsc は型チェック/静的検査だけ行う構成。
      - “型チェックとビルドを分離する” よくあるフロントエンド構成。
    */

    // ------------------------------------------------------------
    // JSX の変換方式（React 17+ の自動 JSX 変換）
    // ------------------------------------------------------------
    "jsx": "react-jsx",
    /*
      ✅ JSX を React の新しい変換方式（automatic runtime）で扱う。
      - 以前のように `import React from 'react'` を必須にしない構成が可能。
      - Vite + React で一般的な設定。
    */

    /* Linting */

    // ------------------------------------------------------------
    // strict：型検査を厳格にする（安全側に倒す）
    // ------------------------------------------------------------
    "strict": true,
    /*
      ✅ 多数の厳格