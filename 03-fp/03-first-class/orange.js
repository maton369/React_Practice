// ✅ このコードは「ブロックスコープ（const）と、ブロック内で宣言された関数（saveHim）の可視性」
// を確認するための例である。
// コメントアウトされている `friendship` を使うと「ブロック内の関数を外に持ち出して呼ぶ」
// ＝“関数を値として保存する” という発想（クロージャ）も試せる構成になっている。

// ------------------------------------------------------------
// 0) friendship を使う想定（今はコメントアウト）
// ------------------------------------------------------------
// let friendship;
// ↑ これを有効化すると、後で friendship に関数を代入して外で呼べるようになる。
// ただし今のままだと friendship は宣言されていないので、代入/呼び出しはできない。

// ------------------------------------------------------------
// 1) if (true) { ... }：ブロックスコープの生成
// ------------------------------------------------------------
if (true) {
  // ✅ const he はブロックスコープ（この { } の中）にだけ存在する変数
  // - ブロックの外からは参照できない
  // - これは let/const の “ブロックスコープ” の性質
  const he = "Kakeru";

  // ✅ saveHim は「he を参照する関数」をこのブロック内で宣言している
  // ここではテンプレート文字列で `he` を埋め込み、ログ出力する。
  function saveHim() {
    /*
      ✅ saveHim() のアルゴリズム（実行時に起きること）
      1) 外側スコープの変数 he を参照して値を取り出す（= "Kakeru"）
      2) `${he} is alive!` の文字列を生成する
      3) console.log で副作用（出力）を起こす

      ✅ クロージャの観点
      - saveHim は he を参照しているため、もし saveHim をブロック外へ持ち出した場合、
        関数は he を含む環境を保持し続ける（クロージャ）
      - ただし “持ち出せた場合” の話で、このコードは今は持ち出し部分がコメントアウトされている
    */
    console.log(`${he} is alive!`);
  }

  // ------------------------------------------------------------
  // 2) friendship = saveHim;（今はコメントアウト）
  // ------------------------------------------------------------
  // friendship = saveHim;
  /*
    ✅ これを有効化すると起きること：
    - ブロック内で作った関数 saveHim を、外側の変数 friendship に代入して持ち出す
    - friendship はブロック外でも参照できるので、外で friendship() と呼べる

    ✅ そのときのアルゴリズム的意味：
    - saveHim は he を参照しているため、friendship に代入されてブロック外に出ても
      he の値（"Kakeru"）を覚え続ける（クロージャ）
    - つまり “ブロック内の状態を閉じ込めた関数” を外に持ち出すことになる
  */
}

// ------------------------------------------------------------
// 3) friendship();（今はコメントアウト）
// ------------------------------------------------------------
// friendship();
/*
  ✅ これを有効化するには、上の `let friendship;` と `friendship = saveHim;` も有効化が必要。

  有効化した場合の挙動：
  - if ブロックの外で friendship() を呼ぶ
  - friendship は saveHim を指しているので saveHim が実行される
  - saveHim は he="Kakeru" を参照して "Kakeru is alive!" を出力する

  ⚠️ ただし現状のまま（コメントアウトのまま）だと：
  - friendship 自体が存在しない（宣言されていない）
  - saveHim もブロック外からは参照できない
  ので、外側で呼ぶことはできない。
*/

// ------------------------------------------------------------
// 補足：ブロック内 function 宣言の注意
// ------------------------------------------------------------
// ブロック内の function 宣言は、環境（ブラウザ/Node、strict mode など）により
// 取り扱いが微妙に異なる話題がある。
// ただし “このコードの意図” としては、saveHim をブロック内に閉じ込め、
// 必要なら friendship に代入して外へ持ち出す、という理解が中心になる。